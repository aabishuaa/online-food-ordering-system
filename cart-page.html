<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Juici Patties</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/chosen.min.css">
    <link rel="stylesheet" href="assets/css/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/simple-line-icons.css">
    <link rel="stylesheet" href="assets/css/jquery-ui.css">
    <link rel="stylesheet" href="assets/css/meanmenu.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<body>
    <header class="header-area">
        <div class="header-top black-bg">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-12 col-sm-4">
                        <div class="welcome-area">
                            <p>Welcome to Juici Patties! </p>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-8 col-12 col-sm-8">
                        <div class="account-curr-lang-wrap f-right">
                            <ul>
                                
                                
                                <li class="top-hover"><a href="#">Setting  <i class="ion-chevron-down"></i></a>
                                    <ul>
                                        <li><a href="wishlist.html">Wishlist  </a></li>
                                        <li><a href="index.html">LogOut</a></li>
                                        <li><a href="login-register.html">Register</a></li>
                                        <li><a href="my-account.html">my account</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-middle">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-4 col-12 col-sm-4">
                        <div class="logo">
                            <a href="index.html">
                                <img alt="" src="assets/img/logo/logo.png">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-8 col-12 col-sm-8">
                        <div class="header-middle-right f-right">
                            <div class="header-login">
                                <a href="login-register.html">
                                    <div class="header-icon-style">
                                        <i class="icon-user icons"></i>
                                    </div>
                                    <div class="login-text-content">
                                        <p>Welcome Abishua!</p>
                                    </div>
                                </a>
                            </div>
                            <div class="header-wishlist">
                               &nbsp;
                            </div>
                            <div class="header-cart">
                                <a href="#">
                                    <div class="header-icon-style">
                                        <i class="icon-handbag icons"></i>
                                        <span id="total-items"></span>
                                    </div>
                                    <div class="cart-text">
                                        <span class="digit">My Cart</span>
                                        <span class="cart-digit-bold">Quick Buy</span>
                                    </div>
                                </a>
                                <div class="shopping-cart-content">
                                    <ul>
                                        <li class="single-shopping-cart">
                                            <div class="shopping-cart-img">
                                                <a href="#"><img alt="" src="assets/img/cart/rice.png"></a>
                                            </div>
                                            <div class="shopping-cart-title">
                                                <h4><a href="#">Rice & Peas </a></h4>
                                                <h6>Qty: 01</h6>
                                                <span>$120.00</span>
                                            </div>
                                            <div class="shopping-cart-delete">
                                                <a href="#"><i class="ion ion-close"></i></a>
                                            </div>
                                        </li>
                                        <li class="single-shopping-cart">
                                            <div class="shopping-cart-img">
                                                <a href="#"><img alt="" src="assets/img/cart/friedChicken.png"></a>
                                            </div>
                                            <div class="shopping-cart-title">
                                                <h4><a href="#">Fried Chicken</a></h4>
                                                <h6>Qty: 02</h6>
                                                <span>$350.00</span>
                                            </div>
                                            <div class="shopping-cart-delete">
                                                <a href="#"><i class="ion ion-close"></i></a>
                                            </div>
                                        </li>
                                    </ul>
                                    <div class="shopping-cart-total">

                                        <h4>Total : <span class="shop-total">$470.00</span></h4>
                                    </div>
                                    <div class="shopping-cart-btn">
                                        
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom transparent-bar black-bg">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-12">
                        <div class="main-menu">
                            <nav>
                                <ul>
                                    <li><a href="shop.html">Home</a></li>
                                    <li><a href="about-us.html">about</a></li>
                                    <li><a href="contact.html">contact us</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- mobile-menu-area-start -->
        <div class="mobile-menu-area">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="mobile-menu">
                            <nav id="mobile-menu-active">
                                <ul class="menu-overflow" id="nav">
                                    <li><a href="index.html">Home</a></li>
                                    <li><a href="index.html">Home</a></li>
                                    <li><a href="index.html">Home</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- mobile-menu-area-end -->
    </header>

    <div class="cart-main-area pt-95 pb-100">
        <div class="container">
            <h3 class="page-title">Your cart items</h3>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                    <form action="#">
                        <div class="table-content table-responsive">
                            <table id="cart-table-body">
                                <thead>
                                    <tr>
                                        <th>Image</th>
                                        <th>Product Name</th>
                                        <th>Unit Price</th>
                                        <th>Qty</th>
                                        <th>Subtotal</th>
                                        <th>Discard/Edit</th>
                                        
                                    </tr>
                                </thead>
                                <tbody id="cart-body">
                                    <!-- Cart items will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="cart-shiping-update-wrapper">
                                    <div class="cart-shiping-update">
                                        <a href="shop.html">Continue Shopping</a>
                                    </div>
                                    <div class="cart-clear">
                                        <a href="#" onclick="displayReceipt()">Submit Order</a>
                                        <a href="#" onclick="clearCart()">Clear Cart</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-area black-bg-2 pt-70">
        <div class="footer-bottom-area border-top-4">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-7">
                        <div class="copyright">
                            <p>Copyright © <a href="#"></a>Juici Patties All Right Reserved.</p>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-5">
                        <div class="footer-social">
                            <ul>
                                <li><a href="#"><i class="ion-social-facebook"></i></a></li>
                                <li><a href="#"><i class="ion-social-twitter"></i></a></li>
                                <li><a href="#"><i class="ion-social-instagram-outline"></i></a></li>
                                <li><a href="#"><i class="ion-social-googleplus-outline"></i></a></li>
                                <li><a href="#"><i class="ion-social-rss"></i></a></li>
                                <li><a href="#"><i class="ion-social-dribbble-outline"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/vendor/jquery-1.12.0.min.js"></script>
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <script src="assets/js/ajax-mail.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/plugins.js"></script>
    <script src="assets/js/main.js"></script>

    <script>

document.addEventListener('DOMContentLoaded', function () {
    // Your JavaScript code here
});
        var cart = JSON.parse(localStorage.getItem('cart')) || [];
        var totalItems = document.getElementById('total-items');

        // Function to display cart items in the table
        function displayCart() {
            var cartBody = document.getElementById('cart-body');
            cartBody.innerHTML = '';
            var totalQuantity = 0;

            for (var i = 0; i < cart.length; i++) {
                var row = document.createElement('tr');
                row.innerHTML = `
                    <td class="product-thumbnail">
                        <a href="#"><img src="${cart[i].image}" alt=""></a>
                    </td>
                    <td class="product-name"><a href="#">${cart[i].name}</a></td>
                    <td class="product-price-cart"><span class="amount">$${cart[i].price}</span></td>
                    <td class="product-quantity">
                        <div class="cart-plus-minus">
                            <input class="cart-plus-minus-box" type="number" name="qtybutton" value="${cart[i].quantity}" readonly>
                        </div>
                    </td>
                    <td class="product-subtotal">$${cart[i].total}</td>
                    <td class="product-remove">
                        <a href="#" onclick="removeItem(${i})"><i class="fa fa-times"></i></a>
                        <a href="#" onclick="editItem(${i})"><i class="fa fa-pencil"></i></a>
                 
                                                
                `;
                cartBody.appendChild(row);
                totalQuantity = totalQuantity+cart[i].quantity;
            }
            totalItems.textContent = totalQuantity;
            localStorage.setItem('totalQuantity', totalQuantity);
        }

        // Function to update cart quantity
        function updateQuantity(index, newQuantity) {
            var cartItem = cart[index];
            cartItem.quantity = parseInt(newQuantity);

    // Recalculate subtotal based on the new quantity
            cartItem.total = cartItem.quantity * cartItem.price;

            localStorage.setItem('cart', JSON.stringify(cart));
            displayCart();
}

        // Function to remove item from the cart
                // Remove item from the cart
                function removeItem(index) {
            var confirmDelete = window.confirm("Are you sure you want to remove this item from the cart?");

            if (confirmDelete) {
    // If user confirms, remove the item
                cart.splice(index, 1);
                localStorage.setItem('cart', JSON.stringify(cart));
                displayCart();
            } else {
    // If user cancels, do nothing
    // You can add more logic here if needed
}
}


        
        // Function to clear the cart
        function clearCart() {
            var confirmDelete = window.confirm("Are you sure you want to clear your cart?");

            if (confirmDelete) {
    // If user confirms, remove the item
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                displayCart();
            } else {
    // If user cancels, do nothing
    // You can add more logic here if needed
}
            
        }

        // Function to calculate the total amount in the cart
        function calculateTotalAmount() {
            var total = 0;
            for (var i = 0; i < cart.length; i++) {
                total += cart[i].quantity * cart[i].price;
            }
            return total.toFixed(2);
        }

        // Function to generate a random order number
        function generateOrderNumber() {
            return Math.floor(Math.random() * 1000000) + 1;
        }

        // Function to redirect to the checkout page
        function redirectToCheckout() {
            var totalAmount = calculateTotalAmount();

            // Save order details to localStorage
            var orderDetails = {
                totalAmount: totalAmount,
                items: cart
            };

            localStorage.setItem('orderDetails', JSON.stringify(orderDetails));

            // Redirect to the order confirmation page
            window.location.href = 'confirm.html';
        }

        // Initial display of the cart
        displayCart();
  

    // Assuming you have the 'displayCart' function in your code

    // Add this function to generate and display the e-receipt
    function displayReceipt() {
    var receiptContent = document.getElementById('receiptContent');
    var receiptCloseButton = document.getElementById('receiptCloseButton');
    var timerDisplay = document.getElementById('timerDisplay');
    var totalAmount = calculateTotalAmount();

    // Generate receipt content (customize this based on your needs)
    var receiptHTML = '<img src="logo.png" alt="Company Logo" style="max-width: 200px; margin-bottom: 20px;">';
    receiptHTML += '<p><strong>Order Number:</strong> ' + generateOrderNumber() + '</p>';
    receiptHTML += '<table>';
    receiptHTML += '<tr><th>Item</th><th>Quantity</th><th>Price</th></tr>';

    for (var i = 0; i < cart.length; i++) {
        receiptHTML += '<tr>';
        receiptHTML += '<td>' + cart[i].name + '</td>';
        receiptHTML += '<td>' + cart[i].quantity + '</td>';
        receiptHTML += '<td>$' + (cart[i].quantity * cart[i].price).toFixed(2) + '</td>';
        receiptHTML += '</tr>';
    }

    receiptHTML += '</table>';
    receiptHTML += '<p><strong>Total Amount:</strong> $' + totalAmount + '</p>';

    receiptContent.innerHTML = receiptHTML;

    // Show the modal
    var receiptModal = document.getElementById('receiptModal');
    receiptModal.style.display = 'block';

    // Start the two-minute countdown timer
    startTimer(2 * 60, function () {
        // Timer has reached zero
        alert('Order Successfully Sent');
        closeReceiptModal();
        receiptCloseButton.disabled = true;
        timerDisplay.innerHTML = ''; // Clear the timer display
    }, function (minutes, seconds) {
        // Update the timer display
        timerDisplay.innerHTML = 'Time Remaining: ' + minutes + 'm ' + seconds + 's';
    });
}

// Function to start the timer
function startTimer(duration, callback, updateCallback) {
    var timer = duration;
    var minutes, seconds;

    var timerInterval = setInterval(function () {
        minutes = Math.floor(timer / 60);
        seconds = timer % 60;

        // Call the update callback function
        if (updateCallback) {
            updateCallback(minutes, seconds);
        }

        if (--timer < 0) {
            // Clear the interval when the timer reaches zero
            clearInterval(timerInterval);
            // Call the callback function
            callback();
        }
    }, 1000);


    
}

function editItem(index) {
    var cartItem = cart[index];
    var newQuantity = prompt("Enter the new quantity:", cartItem.quantity);

    // Check if the user entered a valid quantity
    if (newQuantity !== null && !isNaN(newQuantity) && newQuantity > 0) {
        var confirmEdit = window.confirm("Are you sure you want to update the quantity?");

        if (confirmEdit) {
            // If user confirms, update the quantity
            updateQuantity(index, newQuantity);
        } else {
            // If user cancels, do nothing
            // You can add more logic here if needed
        }
    } else {
        // Display an error message for invalid quantity input
        alert("Please enter a valid quantity.");
    }
}

// Add this function to close the receipt modal
function closeReceiptModal() {
    var receiptModal = document.getElementById('receiptModal');
    receiptModal.style.display = 'none';
}

function closeReceiptModal1() {
    var confirmDelete = window.confirm("Are you sure you want to CANCEL your order?");
    var receiptModal = document.getElementById('receiptModal');
            if (confirmDelete) {
    // If user confirms, remove the item
    receiptModal.style.display = 'none';
            } else {
    // If user cancels, do nothing
    // You can add more logic here if needed
}
    
}

    var totalQuantity = localStorage.getItem('totalQuantity') || 0;

// Display totalQuantity wherever needed on the page
    document.getElementById('total-items').textContent = totalQuantity;


    </script>
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeConfirmationModal()">&times;</span>
            <p>Are you sure you want to remove this item from the cart?</p>
            <button id="confirmDeleteBtn">Yes, remove it</button>
            <button id="cancelDeleteBtn">Cancel</button>
        </div>
    </div>

    <!-- Replace 'path/to/company/logo.png' with the actual path or URL of your company's logo -->

    <div id="receiptModal">
        <span class="close" onclick="closeReceiptModal1()">&times;</span>
        <!-- Receipt content goes here -->
        <h2>Order Receipt</h2>
        <div id="receiptContent"></div>
        <p id="timerDisplay"></p> <!-- Added timer display element -->
        <button onclick="closeReceiptModal1()">CANCEL ORDER</button>
    </div>
    

    


</body>

</html>
